(this["webpackJsonpclose-frontend"]=this["webpackJsonpclose-frontend"]||[]).push([[0],{172:function(e,t,a){},174:function(e,t,a){"use strict";(function(e){var n=a(14),r=a(15),o=a(18),i=a(17),s=a(0),l=a.n(s),c=a(95),u=a(32),h=(a(40),a(35)),m=a(19),p=a(21),v=function(t){Object(o.a)(s,t);var a=Object(i.a)(s);function s(e){var t;return Object(n.a)(this,s),(t=a.call(this,e)).state={user:"",pass:"",initialLoad:!0,loginLoading:!1,loginFailed:!1,loggedIn:!1},t}return Object(r.a)(s,[{key:"componentDidMount",value:function(){void 0!==localStorage.getItem("auth")?this.login(localStorage.getItem("auth"),!0):this.setState({initialLoad:!1})}},{key:"login",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setState({loginLoading:!0,loginFailed:!1},(function(n){m.a.auth=e,m.a.layoutList().then((function(e){void 0===e?t.setState({loginFailed:!a,loginLoading:!1,initialLoad:!1}):(localStorage.setItem("auth",m.a.auth),t.props.history.push("/home"))}))}))}},{key:"render",value:function(){var t=this,a=e.from("".concat(this.state.user,":").concat(this.state.pass)).toString("base64");return this.state.initialLoad?l.a.createElement(l.a.Fragment,null):l.a.createElement(h.a,{loggedIn:!1,header:"Login",subHeader:"closedHAB"},l.a.createElement(c.a,{style:{width:"10cm",margin:"auto"}},l.a.createElement(c.a.Input,{label:"Username",input:{autoComplete:"username"},onChange:function(e){return t.setState({user:e.target.value,loginFailed:!1})},disabled:this.state.loginLoading,error:this.state.loginFailed}),l.a.createElement(c.a.Input,{label:"Password",input:{autoComplete:"current-password"},type:"password",onChange:function(e){return t.setState({pass:e.target.value,loginFailed:!1})},disabled:this.state.loginLoading,error:this.state.loginFailed}),l.a.createElement(c.a.Button,{style:{backgroundColor:"#9f35cc"},floated:"right",onClick:function(e){return t.login(a)},disabled:this.state.loginLoading,loading:this.state.loginLoading},"Log in",l.a.createElement(u.a,{name:"arrow right"}))))}}]),s}(l.a.Component);t.a=Object(p.f)(v)}).call(this,a(219).Buffer)},182:function(e,t,a){e.exports=a.p+"static/media/logo.dba46384.png"},19:function(e,t,a){"use strict";var n=a(124),r=a(14),o=a(15),i=function(){function e(){Object(r.a)(this,e)}return Object(o.a)(e,null,[{key:"rest",value:function(e){var t=this;return new Promise((function(a){fetch("".concat(t.host).concat(e),{headers:{Authorization:"Basic ".concat(t.auth)}}).then((function(t){switch(t.status){case 200:return t.json();case 403:return console.error("Forbidden: ".concat(e)),void a();default:return console.error(t.status,t.text()),void a()}})).then((function(e){void 0===e?a():0!==e.error?(console.error(e.message),a()):a(e.data)})).catch((function(e){console.error(e),a()}))}))}},{key:"layoutList",value:function(){var e=this;return new Promise((function(t){e.rest("layout/list").then(t)}))}},{key:"layoutGet",value:function(e){var t=this;return new Promise((function(a){t.rest("layout/get?q=".concat(encodeURIComponent(e))).then(a)}))}},{key:"varList",value:function(){var e=this;return new Promise((function(t){e.rest("var/list").then(t)}))}},{key:"varGet",value:function(e){var t=this;return new Promise((function(a){t.rest("var/get?q=".concat(encodeURIComponent(e))).then(a)}))}},{key:"varSet",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(r){a.rest("var/set?q=".concat(encodeURIComponent(e),"&v=").concat(encodeURIComponent(t),"&f=").concat(n?1:0)).then(r)}))}},{key:"varSubConnected",value:function(){return void 0!==this.subConnection&&null!==this.subConnection&&this.subConnection.readyState===this.subConnection.OPEN}},{key:"varSubConnect",value:function(){var e=this;return new Promise((function(t){e.varSubConnected()?t((function(e){})):(e.subConnection=new EventSource("".concat(e.host,"var/sub"),{withCredentials:!0}),e.varList().then((function(a){if(void 0!==a){var r,o=Object(n.a)(a);try{var i=function(){var t=s=r.value;e.subConnection.addEventListener(s,(function(a){if(void 0!==e.varCb[t]){var r,o=Object(n.a)(e.varCb[t]);try{for(o.s();!(r=o.n()).done;){var i=r.value;void 0!==i&&i(a.data)}}catch(s){o.e(s)}finally{o.f()}}}))};for(o.s();!(r=o.n()).done;){var s;i()}}catch(l){o.e(l)}finally{o.f()}t((function(t){return e.subConnection.close()}))}t()})))}))}},{key:"varSub",value:function(e,t){var a=this;void 0===this.varCb[e]&&(this.varCb[e]=[]);var n=this.varCb[e].push(t)-1;return function(t){return a.varCb[e][n]=void 0}}},{key:"setup",value:function(){var e=this;return new Promise((function(t){e.rest("setup").then(t)}))}}]),e}();i.host="/api/",i.auth="",i.varCb={},t.a=i},212:function(e,t,a){e.exports=a(354)},217:function(e,t,a){},35:function(e,t,a){"use strict";var n=a(36),r=a(14),o=a(15),i=a(18),s=a(17),l=a(0),c=a.n(l),u=a(199),h=a(125),m=a(96),p=a(200),v=a(123),d=a(32),f=a(34),b=a(179),g=a(19),y=a(182),E=a.n(y),O=a(40),j=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={setup:{},sidebar:"1"===(localStorage.getItem("sidebar")||"1")},g.a.auth=localStorage.getItem("auth")||"",g.a.varSubConnect(),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.a.setup().then((function(t){void 0===t?"/"!==window.location.pathname&&(window.location.pathname="/"):e.setState({setup:t})}))}},{key:"toggleSidebar",value:function(){var e=this;this.setState({sidebar:!this.state.sidebar},(function(t){localStorage.setItem("sidebar",e.state.sidebar?"1":"0")}))}},{key:"render",value:function(){var e=this,t=document.location.pathname,a=void 0===this.props.loggedIn||this.props.loggedIn,r={position:"fixed",top:"0",left:"0",minWidth:"100vw",minHeight:"100vh"},o=Object(n.a)(Object(n.a)({},r),{},{minWidth:"",right:this.state.sidebar&&a?"150px":"0",margin:"0",transition:"transform 500ms ease, right 500ms ease"}),i=Object(n.a)(Object(n.a)({},r),{},{backgroundColor:"#ddd"}),s={position:"fixed",top:"2mm",left:"2mm",zIndex:10,backgroundColor:"#9f35ccb0",transition:"opacity 1s"},l=Object(n.a)({},s),g=Object(n.a)(Object(n.a)({},s),{},{opacity:this.state.sidebar?0:1}),y=[{key:void 0===localStorage.getItem("homepage")?"/homeSet":"/home",name:"Home",icon:"home"},{key:"/layouts",name:"Layouts",icon:"columns"},{key:"/variables",name:"Variables",icon:"sitemap"},{key:"/settings",name:"Settings",icon:"settings"},{key:"/about",name:"About",icon:"info"}],j=c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,{style:g,size:"small",circular:!0,icon:"sidebar",onClick:function(t){return e.toggleSidebar()}}),this.props.subHeader&&c.a.createElement(O.a,{sub:!0},this.props.subHeader),this.props.header&&c.a.createElement(O.a,null,this.props.header));return c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,null,c.a.createElement("title",null,this.state.setup.name||"closedHAB")),a?c.a.createElement(h.a.Pushable,{style:Object(n.a)(Object(n.a)({},r),{},{overflow:"hidden"})},c.a.createElement(h.a,{width:"thin",animation:"slide out",inverted:!0,vertical:!0,visible:this.state.sidebar,as:m.a},c.a.createElement(u.a,{style:l,size:"tiny",circular:!0,icon:"x",onClick:function(t){return e.toggleSidebar()}}),c.a.createElement(m.a.Header,null,c.a.createElement(p.a,{inverted:!0,textAlign:"center",style:{marginTop:"12mm",marginBottom:"10px"}},c.a.createElement(v.a,{src:E.a}),c.a.createElement("br",null),"closedHAB")),y.map((function(e){return c.a.createElement(m.a.Item,{key:e.key,active:t===e.key,as:f.b,to:e.key},c.a.createElement(d.a,{name:e.icon}),e.name)})),c.a.createElement(m.a.Item,{onClick:function(e){return localStorage.removeItem("auth")},as:f.b,to:"/"},c.a.createElement(d.a,{name:"log out"}),"Log out")),c.a.createElement(h.a.Pusher,{style:i},c.a.createElement("div",{style:o},j,this.props.children))):c.a.createElement("div",{style:r},j,this.props.children))}}]),a}(c.a.Component);t.a=j},354:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(50),i=a.n(o),s=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,368)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),o(e),i(e)}))},l=a(173),c=a(34),u=a(21),h=(a(217),a(218),a(174)),m=a(14),p=a(15),v=a(18),d=a(17),f=a(19),b=a(366),g=a(365),y=a(199),E=function(e){Object(v.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={},n.props.var||console.error("CButton: No var given"),void 0===n.props.value&&console.error('CButton: No value given for var "'.concat(n.props.var,'"')),n}return Object(p.a)(a,[{key:"send",value:function(){this.props.var&&this.props.value&&f.a.varSet(this.props.var,this.props.value,this.props.forceSend)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{inverted:!0,primary:!0,icon:this.props.icon,fluid:!0,onClick:function(t){return e.send()}},this.props.text||this.props.children))}}]),a}(r.a.Component),O=(a(172),a(367)),j=a(93),k=function(e){Object(v.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={value:0,last:0},n.props.var||console.error("CSlider: No var given"),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.varGet(this.props.var).then((function(t){return e.setState({value:parseFloat(t),last:parseFloat(t)})})),this.closeSub=f.a.varSub(this.props.var,(function(t){return e.setState({value:parseFloat(t),last:parseFloat(t)})}))}},{key:"componentWillUnmount",value:function(){this.closeSub()}},{key:"startSend",value:function(){var e=this;this.send(),this.int=setInterval((function(t){return e.send()}),this.props.interval||500)}},{key:"stopSend",value:function(){this.int&&clearInterval(this.int)}},{key:"send",value:function(){this.props.var&&this.state.value!==this.state.last&&(f.a.varSet(this.props.var,this.state.value,this.props.forceSend),this.setState({last:this.state.value}))}},{key:"render",value:function(){var e=this,t=Math.pow(10,this.props.labelPrecision||0),a=this.props.min||0,n=this.props.max||100,o=(this.state.value-a)/(n-a)*100,i={WebkitAppearance:"none",background:"linear-gradient(to right, #9f35cc 0%, #b75bde ".concat(o,"%, #fff ").concat(o,"%, #fff 100%)"),width:"300px",height:"5px"};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"csliderroot"},this.props.rating?r.a.createElement(O.a,{icon:"star",maxRating:"10",clearable:!0,onRate:function(t,a){var n=a.rating,r=a.maxRating;return e.send(n/r)}},r.a.createElement("i",null,"hello")):r.a.createElement("input",{type:"range",className:"cslider",style:i,value:this.state.value,min:a,max:n,step:this.props.step||"any",onScroll:function(e){return console.log(e)},onMouseDown:function(t){return e.startSend()},onPointerDown:function(t){return e.startSend()},onMouseUp:function(t){return e.stopSend()},onPointerUp:function(t){return e.stopSend()},onChange:function(t){return e.setState({value:t.target.value})}}),!this.props.hideLabel&&r.a.createElement(j.a,null,(this.props.labelConv||function(e){return"".concat(e,"%")})(Math.round((o+Number.EPSILON)*t)/t))))}}]),a}(r.a.Component),C=function(e){Object(v.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={value:0},n.props.var||console.error("CButton: No var given"),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.varGet(this.props.var).then((function(t){return e.setState({value:parseFloat(t)})})),this.closeSub=f.a.varSub(this.props.var,(function(t){return e.setState({value:parseFloat(t)})}))}},{key:"componentWillUnmount",value:function(){this.closeSub()}},{key:"send",value:function(){this.props.var&&f.a.varSet(this.props.var,this.state.value>=.5?0:1,this.props.forceSend)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{primary:this.state.value>=.5,fluid:!0,toggle:!0,onClick:function(t){return e.send()}},this.props.text||this.props.children))}}]),a}(r.a.Component),S=function(e){Object(v.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,"Not Implemented")}}]),a}(r.a.Component),w=function(e){Object(v.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(p.a)(a,[{key:"wrapControl",value:function(e,t){var a=r.a.createElement(g.a,{fluid:!0},r.a.createElement(g.a.Header,null,e.header||""),r.a.createElement(g.a.Content,null,t));return this.props.isRow?r.a.createElement(b.a.Column,null,a):a}},{key:"render",value:function(){for(var e=[],t=0,n=Object.entries(this.props.layout);t<n.length;t++){var o=n[t];if(void 0===o[1].type)e.push(r.a.createElement(a,{isRow:!this.props.isRow,layout:o[1]}));else{var i={button:E,toggle:C,slider:k}[o[1].type];void 0===i&&(console.warn("".concat(o[1].type," is not implemented")),i=S),e.push(this.wrapControl(o[1],r.a.createElement(i,o[1])))}}return this.props.isRow?r.a.createElement(b.a.Row,null,e):r.a.createElement(b.a.Column,null,e)}}]),a}(r.a.Component),L=(r.a.Component,function(e){Object(v.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(p.a)(a,[{key:"render",value:function(){if(void 0===this.props.layout)return r.a.createElement(r.a.Fragment,null);switch(Object.keys(this.props.layout)[0]){case"grid":return r.a.createElement(b.a,{padded:!0},r.a.createElement(w,{layout:this.props.layout.grid}));case"slider":return r.a.createElement(k,null);case"button":return;default:return r.a.createElement(r.a.Fragment,null,'Unknown Layout "',Object.keys(this.props.layout)[0],'"')}}}]),a}(r.a.Component)),F=function(e){Object(v.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("homepage");f.a.layoutList().then((function(a){void 0===a?e.props.history.push("/"):void 0===a.find((function(e){return e===t}))?e.props.history.push("/homeSet"):f.a.layoutGet(t).then((function(t){e.setState({layout:t})}))}))}},{key:"render",value:function(){return void 0===this.state.layout?r.a.createElement(r.a.Fragment,null):r.a.createElement(L,{layout:this.state.layout})}}]),a}(r.a.Component),I=Object(u.f)(F),x=(a(40),function(e){Object(v.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={},n}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),a}(r.a.Component)),P=function(e){Object(v.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URLSearchParams(window.location.search).get("id")||"";f.a.layoutList().then((function(a){void 0===a?e.props.history.push("/"):void 0===a.find((function(e){return e===t}))?e.props.history.push("/layouts"):f.a.layoutGet(t).then((function(t){e.setState({layout:t})}))}))}},{key:"render",value:function(){return void 0===this.state.layout?r.a.createElement(r.a.Fragment,null):r.a.createElement(L,{layout:this.state.layout})}}]),a}(r.a.Component),H=Object(u.f)(P),R=a(364),B=function(e){Object(v.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={layouts:[]},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.layoutList().then((function(t){e.setState({layouts:t||[]})}))}},{key:"transformName",value:function(e){return e[0].toUpperCase()+e.substr(1)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{marginLeft:"10mm"}},r.a.createElement(R.a,{bulleted:!0,relaxed:!0,animated:!0,size:"large"},this.state.layouts.map((function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a.Item,{as:c.b,to:"/view?id=".concat(t)},e.transformName(t)))}))))}}]),a}(r.a.Component),M=function(e){Object(v.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={},n}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),a}(r.a.Component),N=a(198),U=a.n(N),D=a(95),A=a(32),z=a(363),G=function(e){Object(v.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={},n}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(D.a,null,r.a.createElement(j.a,null,r.a.createElement(A.a,{name:"columns"}),"Homepage"),r.a.createElement(z.a,{labeled:!0,options:[{text:"a",value:"a"}]})))}}]),a}(r.a.Component),W=U()(G),T=function(e){Object(v.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={},n}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),a}(r.a.Component),q=function(e){Object(v.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{backgroundColor:"#000",position:"fixed",top:"0",left:"0",minWidth:"100vw",minHeight:"100vh",color:"#fff",textAlign:"center"}},r.a.createElement("h1",null,"404!"))}}]),a}(r.a.Component),J=a(35);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/",exact:!0},r.a.createElement(h.a,null)),r.a.createElement(u.a,{path:"/home"},r.a.createElement(J.a,{header:"Home"},r.a.createElement(I,null))),r.a.createElement(u.a,{path:"/homeSet"},r.a.createElement(J.a,{header:"Set Homepage"},r.a.createElement(x,null))),r.a.createElement(u.a,{path:"/view"},r.a.createElement(J.a,{header:"Layout"},r.a.createElement(H,null))),r.a.createElement(u.a,{path:"/layouts"},r.a.createElement(J.a,{header:"Layouts"},r.a.createElement(B,null))),r.a.createElement(u.a,{path:"/variables"},r.a.createElement(J.a,{header:"Variables"},r.a.createElement(M,null))),r.a.createElement(u.a,{path:"/settings"},r.a.createElement(J.a,{header:"Settings"},r.a.createElement(W,null))),r.a.createElement(u.a,{path:"/about"},r.a.createElement(J.a,{header:"About"},r.a.createElement(T,null))),r.a.createElement(u.a,{component:q})))),document.getElementById("root")),s(),Object(l.a)()},40:function(e,t,a){"use strict";var n=a(14),r=a(15),o=a(18),i=a(17),s=a(0),l=a.n(s),c=a(200),u=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e={position:"absolute",left:"17mm",right:this.props.sidebar?"calc(17mm + 150px)":"17mm",marginTop:"15px",color:this.props.sub?"#9f35ccb0":void 0,transition:"right 500ms ease"},t={width:"100%",height:this.props.sub?"calc(1.1em + 15px)":"calc(2em + 45px)"};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:t},l.a.createElement(c.a,{style:e,size:"huge",inverted:this.props.inverted,subheader:this.props.sub?this.props.children:void 0,dividing:!this.props.sub},this.props.sub?void 0:this.props.children)))}}]),a}(l.a.Component);t.a=u}},[[212,1,2]]]);
//# sourceMappingURL=main.be11fc98.chunk.js.map