addons:
  rest:
    register:
      klotz_switch:
        setup:
          get: http://klotz:8005/power
          set: http://klotz:8005/power
          setMethod: PUT
        forwardConverters:
          - id: parseFloat
      klotz_hue:
        setup:
          get: http://klotz:8005/color
          set: http://klotz:8005/color
          setMethod: PUT
        forwardConverters:
          - id: split
          - id: index
            setup:
              index: 0
          - id: parseFloat
        backwardConverters:
          - id: combine
            setup:
              format:
                - val: true
                - str: ","
                - var: klotz_saturation
                  or: "0"
                - str: ","
                - var: klotz_brightness
                  or: "0"
      klotz_saturation:
        setup:
          get: http://klotz:8005/color
          set: http://klotz:8005/color
          setMethod: PUT
        forwardConverters:
          - id: split
          - id: index
            setup:
              index: 1
          - id: parseFloat
        backwardConverters:
          - id: combine
            setup:
              format:
                - var: klotz_hue
                  or: "0"
                - str: ","
                - val: true
                - str: ","
                - var: klotz_brightness
                  or: "0"
      klotz_brightness:
        setup:
          get: http://klotz:8005/color
          set: http://klotz:8005/color
          setMethod: PUT
        forwardConverters:
          - id: split
          - id: index
            setup:
              index: 2
          - id: parseFloat
        backwardConverters:
          - id: combine
            setup:
              format:
                - var: klotz_hue
                  or: "0"
                - str: ","
                - var: klotz_saturation
                  or: "0"
                - str: ","
                - val: true
